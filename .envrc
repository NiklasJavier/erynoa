# Skip Nix-Setup im Devcontainer (dort ist alles bereits installiert)
if [[ -f /.dockerenv ]] || [[ -n "$REMOTE_CONTAINERS" ]] || [[ -n "$CODESPACES" ]]; then
  # Im Container: Nur .env laden, kein Nix
  :
else
  # Lokal: Verwende nix-direnv f√ºr besseres Caching (falls installiert)
  if has nix_direnv_version; then
    nix_direnv_version 3.0.4
    use flake
  else
    use flake --impure
  fi
  watch_file flake.nix
  watch_file flake.lock
fi

# Load .env file if it exists
dotenv_if_exists .env