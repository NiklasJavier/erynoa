{
	"meta": {
		"version": "2.0.0",
		"phase": "1.4: Relation Matrix Extraction",
		"source_documents": ["03-BEZIEHUNGSMATRIX.md"],
		"description": "Mathematisch-logische Formalisierung aller Modul-Beziehungen"
	},
	"symbols": {
		"Œ£": "UnifiedState",
		"Hub": "SynapseHub",
		"Œπ": "Identity",
		"œÑ": "Trust",
		"œÅ": "Realm",
		"Œ®": "ECLVM",
		"Œ©": "Storage",
		"œÄ": "Package",
		"üõ°Ô∏è": "Protection",
		"‚ä≥": "DependsOn",
		"‚Üí": "Triggers",
		"‚ä≤‚ä≥": "Bidirectional",
		"‚ä¢": "Validates",
		"‚äé": "Aggregates",
		"‚Üù": "Updates"
	},
	"relation_types": {
		"DependsOn": {
			"symbol": "‚ä≥",
			"semantics": "A ‚ä≥ B ‚â° A requires B to function",
			"transitivity": true
		},
		"Triggers": {
			"symbol": "‚Üí",
			"semantics": "A ‚Üí B ‚â° state_change(A) ‚üπ event(B)",
			"transitivity": false
		},
		"Validates": {
			"symbol": "‚ä¢",
			"semantics": "A ‚ä¢ B ‚â° A asserts invariants on B",
			"transitivity": false
		},
		"Aggregates": {
			"symbol": "‚äé",
			"semantics": "A ‚äé B ‚â° A contains or manages B",
			"transitivity": true
		},
		"Bidirectional": {
			"symbol": "‚ä≤‚ä≥",
			"semantics": "A ‚ä≤‚ä≥ B ‚â° (A ‚ä≥ B) ‚àß (B ‚ä≥ A)",
			"transitivity": false
		},
		"Updates": {
			"symbol": "‚Üù",
			"semantics": "A ‚Üù B ‚â° A modifies state of B",
			"transitivity": false
		}
	},
	"topology": {
		"layers": {
			"L0_Core": {
				"components": ["Œ£", "Hub"],
				"description": "Nervensystem-Kern",
				"formalism": "L‚ÇÄ = {Œ£, Hub}"
			},
			"L1_Engines": {
				"components": ["œÑ", "Event", "Formula", "Consensus"],
				"description": "Verarbeitungs-Engines",
				"formalism": "L‚ÇÅ = {E_œÑ, E_event, E_formula, E_consensus}"
			},
			"L2_Domain": {
				"components": ["Œπ", "œÅ", "Gateway", "Saga", "Quota"],
				"description": "Dom√§nen-Logik",
				"formalism": "L‚ÇÇ = {Œπ, œÅ, G, S, Q}"
			},
			"L3_Infrastructure": {
				"components": ["Œ©", "P2P", "Œ®"],
				"description": "Infrastruktur-Schicht",
				"formalism": "L‚ÇÉ = {Œ©, P2P, Œ®}"
			},
			"L4_Protection": {
				"components": ["Anomaly", "Diversity", "Quadratic", "Calibration"],
				"description": "Schutz-Mechanismen",
				"formalism": "L‚ÇÑ = üõ°Ô∏è = {A, D, Q, C}"
			}
		},
		"data_flow": {
			"primary": "Œ£ ‚Üí Hub ‚Üí L‚ÇÅ ‚Üí L‚ÇÇ ‚Üí L‚ÇÉ",
			"feedback": "L‚ÇÑ ‚ä¢ (L‚ÇÅ ‚à™ L‚ÇÇ ‚à™ L‚ÇÉ)"
		}
	},
	"relations": {
		"identity_relations": [
			{
				"from": "œÑ",
				"to": "Œπ",
				"type": "‚ä≥",
				"axiom": "K6",
				"formalism": "œÑ(x) ‚ä≥ Œπ(x) ‚â° trust requires identity"
			},
			{
				"from": "Œπ",
				"to": "œÑ",
				"type": "‚Üí",
				"axiom": "K2",
				"formalism": "‚àÄŒπ_new: spawn(Œπ) ‚Üí init(œÑ(Œπ))"
			},
			{ "from": "Event", "to": "Œπ", "type": "‚ä≥", "axiom": "K9", "formalism": "‚àÄe: author(e) ‚àà Œπ" },
			{
				"from": "Gateway",
				"to": "Œπ",
				"type": "‚ä≥",
				"axiom": "K23",
				"formalism": "crossing ‚üπ verify(Œπ)"
			},
			{ "from": "Gateway", "to": "Œπ", "type": "‚ä¢", "axiom": "K23", "formalism": "G ‚ä¢ valid(Œπ)" },
			{
				"from": "P2P.Swarm",
				"to": "Œπ",
				"type": "‚ä≥",
				"axiom": null,
				"formalism": "PeerId ‚â° DeviceDID ‚àà Œπ"
			},
			{
				"from": "Anomaly",
				"to": "Œπ",
				"type": "‚ä¢",
				"axiom": "K26",
				"formalism": "üõ°Ô∏è.A ‚ä¢ ¬¨anomalous(Œπ)"
			},
			{ "from": "Hub", "to": "Œπ", "type": "‚äé", "axiom": null, "formalism": "Hub ‚äé Observer(Œπ)" },
			{ "from": "Œ®", "to": "Œπ", "type": "‚ä≥", "axiom": null, "formalism": "Œ®.call ‚ä≥ caller ‚àà Œπ" },
			{ "from": "Œ©.Identity", "to": "Œπ", "type": "‚äé", "axiom": null, "formalism": "Œ© ‚äé persist(Œπ)" }
		],
		"trust_relations": [
			{
				"from": "Gateway",
				"to": "œÑ",
				"type": "‚ä≥",
				"axiom": "K23",
				"formalism": "crossing ‚üπ œÑ > Œ∏_min"
			},
			{
				"from": "Saga",
				"to": "œÑ",
				"type": "‚ä≥",
				"axiom": "K24",
				"formalism": "saga.exec ‚ä≥ œÑ(participants)"
			},
			{ "from": "Gas", "to": "œÑ", "type": "‚ä≥", "axiom": null, "formalism": "Œ≥_limit = f(œÑ)" },
			{ "from": "Mana", "to": "œÑ", "type": "‚ä≥", "axiom": null, "formalism": "Œº_regen = g(œÑ)" },
			{ "from": "Formula", "to": "œÑ", "type": "‚ä≥", "axiom": "K15", "formalism": "F.input ‚ä≥ œÑ" },
			{
				"from": "Consensus",
				"to": "œÑ",
				"type": "‚ä≥",
				"axiom": "K18",
				"formalism": "vote_weight = h(œÑ)"
			},
			{
				"from": "P2P.Gossip",
				"to": "œÑ",
				"type": "‚ä≥",
				"axiom": null,
				"formalism": "propagate ‚ä≥ œÑ(peer)"
			},
			{
				"from": "Diversity",
				"to": "œÑ",
				"type": "‚ä¢",
				"axiom": "K19",
				"formalism": "üõ°Ô∏è.D ‚ä¢ Gini(œÑ) < Œ∏"
			}
		],
		"realm_relations": [
			{ "from": "œÅ", "to": "Œπ", "type": "‚ä≥", "axiom": "K22", "formalism": "œÅ.members ‚äÜ Œπ" },
			{ "from": "œÅ", "to": "œÑ", "type": "‚ä≤‚ä≥", "axiom": "K22", "formalism": "œÅ ‚ä≤‚ä≥ œÑ" },
			{
				"from": "Gateway",
				"to": "Œ®",
				"type": "‚ä≥",
				"axiom": "K23",
				"formalism": "G.policy ‚Üí Œ®.eval"
			},
			{ "from": "Saga", "to": "Œ®", "type": "‚ä≥", "axiom": "K24", "formalism": "S.step ‚Üí Œ®.exec" },
			{
				"from": "Quota",
				"to": "üõ°Ô∏è",
				"type": "‚Üí",
				"axiom": "K22",
				"formalism": "quota_exceeded ‚Üí trigger(üõ°Ô∏è)"
			},
			{ "from": "œÅ", "to": "Œ©.Realm", "type": "‚äé", "axiom": null, "formalism": "œÅ ‚äé persist(œÅ)" }
		],
		"p2p_relations": [
			{
				"from": "P2P.Swarm",
				"to": "Œπ",
				"type": "‚ä≥",
				"axiom": null,
				"formalism": "peer ‚â° device_did"
			},
			{
				"from": "P2P.Gossip",
				"to": "œÑ",
				"type": "‚ä≥",
				"axiom": null,
				"formalism": "gossip_priority = f(œÑ)"
			},
			{
				"from": "P2P.Gossip",
				"to": "Event",
				"type": "‚Üí",
				"axiom": null,
				"formalism": "recv(msg) ‚Üí emit(event)"
			},
			{
				"from": "P2P.DHT",
				"to": "P2P.Swarm",
				"type": "‚äé",
				"axiom": null,
				"formalism": "DHT ‚äé Swarm"
			},
			{
				"from": "P2P.Relay",
				"to": "œÑ",
				"type": "‚ä≥",
				"axiom": null,
				"formalism": "relay ‚ä≥ œÑ(destination)"
			},
			{
				"from": "P2P.Privacy",
				"to": "Œπ",
				"type": "‚ä≥",
				"axiom": null,
				"formalism": "privacy ‚ä≥ Œπ.mode"
			}
		],
		"shell_relations": [
			{
				"from": "Shell",
				"to": "Œπ",
				"type": "‚ä≥",
				"axiom": "K8",
				"formalism": "shell.access ‚ä≥ valid(agent_did)"
			},
			{
				"from": "Shell",
				"to": "œÑ",
				"type": "‚ä≥",
				"axiom": "K6",
				"formalism": "shell.action ‚ä≥ œÑ > Œ∏_shell"
			},
			{
				"from": "Shell",
				"to": "Œ®",
				"type": "‚ä≥",
				"axiom": "K23",
				"formalism": "shell ‚Üí Œ®.eval(ShellPolicy)"
			},
			{
				"from": "Shell",
				"to": "Capability",
				"type": "‚ä≥",
				"axiom": "K8",
				"formalism": "action ‚àà capabilities(agent)"
			},
			{
				"from": "Delegation",
				"to": "Shell",
				"type": "‚Üí",
				"axiom": "K8",
				"formalism": "delegate(cap) ‚Üí grant(shell)"
			},
			{
				"from": "Shell",
				"to": "Event",
				"type": "‚Üí",
				"axiom": "K9",
				"formalism": "shell.action ‚Üí audit_event"
			},
			{
				"from": "Shell",
				"to": "Anomaly",
				"type": "‚Üí",
				"axiom": "K26",
				"formalism": "shell.action ‚Üí check(üõ°Ô∏è.A)"
			},
			{ "from": "Shell", "to": "œÑ", "type": "‚Üù", "axiom": "K6", "formalism": "result(action) ‚Üù ŒîœÑ" }
		]
	},
	"event_flow": {
		"formal_definition": "EventFlow: Source ‚Üí Bus ‚Üí State ‚Üí Hub ‚Üí Observers",
		"stages": [
			{
				"stage": 1,
				"name": "External Event",
				"formalism": "e_ext ‚àà P2P.recv()",
				"component": "P2P.Swarm"
			},
			{
				"stage": 2,
				"name": "Ingress",
				"formalism": "Bus.ingress(e_ext) ‚Üí e_state",
				"component": "EventBus"
			},
			{
				"stage": 3,
				"name": "State Application",
				"formalism": "Œ£' = apply(Œ£, e_state) ‚àß log(e_state) ‚àß merkle.update()",
				"component": "UnifiedState"
			},
			{
				"stage": 4,
				"name": "Dispatch",
				"formalism": "‚àÄobs ‚àà Hub.observers(e_state): obs.notify(e_state)",
				"component": "SynapseHub"
			},
			{
				"stage": 5,
				"name": "Observer Reaction",
				"formalism": "obs.on_event(e) ‚Üí side_effects",
				"component": "Observers"
			}
		]
	},
	"synergy_matrix": {
		"definition": "Synergy(A,B) ‚àà [0,10] measures coupling strength",
		"entries": [
			{ "A": "Œπ", "B": "œÑ", "score": 10, "reason": "Fundamental coupling", "formalism": "Œπ ‚ä≤‚ä≥ œÑ" },
			{
				"A": "œÑ",
				"B": "Consensus",
				"score": 9,
				"reason": "K18 Voting weight",
				"formalism": "vote = f(œÑ)"
			},
			{
				"A": "œÅ",
				"B": "Gateway",
				"score": 9,
				"reason": "K23 Crossing",
				"formalism": "cross ‚üπ G.eval"
			},
			{
				"A": "Event",
				"B": "Œ©",
				"score": 8,
				"reason": "Persistence",
				"formalism": "e ‚Üí Œ©.persist(e)"
			},
			{ "A": "Œ®", "B": "œÅ", "score": 8, "reason": "Policy execution", "formalism": "œÅ.policy ‚Üí Œ®" },
			{ "A": "Shell", "B": "Œπ", "score": 8, "reason": "K8 Capabilities", "formalism": "shell ‚ä≥ Œπ" },
			{
				"A": "Shell",
				"B": "œÑ",
				"score": 8,
				"reason": "Trust thresholds",
				"formalism": "shell ‚ä≥ œÑ"
			},
			{
				"A": "Shell",
				"B": "Œ®",
				"score": 7,
				"reason": "Policy evaluation",
				"formalism": "shell ‚Üí Œ®"
			},
			{ "A": "P2P", "B": "Œπ", "score": 7, "reason": "PeerId mapping", "formalism": "peer ‚â° did" },
			{ "A": "üõ°Ô∏è", "B": "œÑ", "score": 7, "reason": "Monitoring", "formalism": "üõ°Ô∏è ‚ä¢ œÑ" },
			{ "A": "Formula", "B": "œÑ", "score": 6, "reason": "K15 Input", "formalism": "F ‚ä≥ œÑ" }
		]
	},
	"critical_paths": {
		"trust_update": {
			"name": "Trust-Update Hot Path",
			"formalism": "T_total = Œ£·µ¢ t_i where t_i = stage_latency",
			"stages": [
				{ "op": "œÑ.update()", "latency_Œºs": 50 },
				{ "op": "Œ£_œÑ.apply() [atomic]", "latency_Œºs": 1 },
				{ "op": "StateEvent::TrustUpdate", "latency_Œºs": 5 },
				{ "op": "log_and_apply()", "latency_Œºs": 30 },
				{ "op": "Hub.dispatch()", "latency_Œºs": 20 }
			],
			"total_Œºs": 106,
			"target_Œºs": 50,
			"optimization_needed": true
		},
		"realm_crossing": {
			"name": "Realm-Crossing Complex Path",
			"formalism": "T_cross = T_parse + T_compose + T_eval",
			"stages": [
				{ "op": "Intent.recv()", "latency_Œºs": 10 },
				{ "op": "IntentParser.parse()", "latency_Œºs": 100 },
				{ "op": "SagaComposer.compose()", "latency_Œºs": 200 },
				{
					"op": "GatewayGuard.evaluate()",
					"latency_Œºs": 500,
					"sub_ops": [
						{ "op": "Œ®.validate()", "latency_Œºs": 300 },
						{ "op": "œÑ.get()", "latency_Œºs": 5 },
						{ "op": "Quota.check()", "latency_Œºs": 10 }
					]
				},
				{ "op": "StateEvent::CrossingEvaluated", "latency_Œºs": 30 }
			],
			"total_Œºs": 1200,
			"acceptable": true
		}
	},
	"cross_cutting": {
		"error_hierarchy": {
			"root": "ErynoaError",
			"formalism": "ErynoaError = Œ£(IdentityError | ExecutionError | RealmError | StorageError | P2PError | ECLVMError | StateError)",
			"variants": [
				"IdentityError",
				"ExecutionError",
				"RealmError",
				"StorageError",
				"P2PError",
				"ECLVMError",
				"StateError"
			]
		},
		"telemetry": {
			"formalism": "‚àÄmodule: module ‚Üí telemetry.{trace, metric, log}",
			"outputs": ["Traces (Jaeger)", "Metrics (Prometheus)", "Logs (structured)"]
		},
		"config": {
			"formalism": "Config = Env ‚äï ModuleConfigs",
			"modules": [
				"TrustEngineConfig",
				"EventEngineConfig",
				"RealmStorageConfig",
				"P2PConfig",
				"ECLVMConfig"
			]
		}
	},
	"invariants": {
		"layer_isolation": {
			"formalism": "‚àÄ(a,b) ‚àà L_i √ó L_j: i < j ‚üπ ¬¨(b ‚ä≥ a)",
			"description": "H√∂here Schichten d√ºrfen nicht von niedrigeren abh√§ngen (au√üer via Events)"
		},
		"event_causality": {
			"formalism": "‚àÄe‚ÇÅ,e‚ÇÇ: e‚ÇÅ ‚Üí e‚ÇÇ ‚üπ t(e‚ÇÅ) < t(e‚ÇÇ)",
			"description": "Kausale Ordnung von Events"
		},
		"observer_independence": {
			"formalism": "‚àÄobs‚ÇÅ,obs‚ÇÇ ‚àà Observers: obs‚ÇÅ.effect ‚à© obs‚ÇÇ.effect = ‚àÖ",
			"description": "Observer-Effekte sind disjunkt"
		}
	}
}
