# â— IMPULS â€“ Policy

> **Schicht:** 4 â€“ Handlung
> **SphÃ¤re:** ECHO (Swarm-Modul)
> **Typ:** Entscheidungsregeln

---

## Konzept

**Policies** sind die Entscheidungsregeln eines Agenten. Sie definieren, unter welchen Bedingungen ein Agent autonom handeln darf.

---

## Policy = Autonomie-Grenzen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   POLICY = DELEGATION VON ENTSCHEIDUNGSGEWALT                              â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   ğŸ‘¤ OWNER                           ğŸ¤– AGENT                        â”‚  â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•                           â•â•â•â•â•â•â•                        â”‚  â”‚
â”‚   â”‚   "Entscheide fÃ¼r mich,              "Ich handle autonom,           â”‚  â”‚
â”‚   â”‚    aber nur wenn..."                  solange Policy erlaubt"        â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚   â”‚   â”‚                                                            â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   POLICY                                                   â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   â•â•â•â•â•â•                                                   â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                                                            â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   âœ“ Preis <= 0.50â‚¬/kWh     â†’  Automatisch akzeptieren     â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   âœ“ Trust >= 0.7           â†’  Automatisch akzeptieren     â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   âœ“ Budget <= 30â‚¬/Tag      â†’  Automatisch bezahlen        â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                                                            â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   âœ— Preis > 0.60â‚¬/kWh      â†’  Owner fragen                â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   âœ— Trust < 0.5            â†’  Ablehnen                    â”‚   â”‚  â”‚
â”‚   â”‚   â”‚   âœ— Budget Ã¼berschritten   â†’  Ablehnen                    â”‚   â”‚  â”‚
â”‚   â”‚   â”‚                                                            â”‚   â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Policy-Struktur

```yaml
policy "vehicle-charging-default" {
  id:   "did:erynoa:policy:vehicle-charging-001"
  name: "Standard Lade-Policy"

  # GÃ¼ltigkeitsbereich
  scope: {
    agent_types: [seeker]
    intent_types: [charge_vehicle]
    environments: [ev-charging-*]
  }

  # Automatische Akzeptanz-Regeln
  auto_accept: {
    conditions: [
      { price_per_kwh: { lte: 0.50 } },        # Max 50ct/kWh
      { trust:         { gte: 0.7 } },         # Min Trust 0.7
      { distance:      { lte: 5 } }            # Max 5km Entfernung
    ]
    combine: AND  # Alle Bedingungen mÃ¼ssen erfÃ¼llt sein
  }

  # Automatische Ablehnungs-Regeln
  auto_reject: {
    conditions: [
      { price_per_kwh: { gt: 0.70 } },         # Ãœber 70ct â†’ ablehnen
      { trust:         { lt: 0.5 } },          # Unter 0.5 â†’ ablehnen
      { no_credential: "eichrecht" }           # Ohne Eichrecht â†’ ablehnen
    ]
    combine: OR  # Eine Bedingung reicht
  }

  # Eskalation (Owner fragen)
  escalate: {
    conditions: [
      { price_per_kwh: { gt: 0.50, lte: 0.70 } },  # Zwischen 50-70ct
      { budget_remaining: { lt: 10 } }             # Weniger als 10â‚¬ Ã¼brig
    ]
    timeout: 300  # Sekunden, dann Default-Aktion
    default_action: reject
  }

  # Budget-Limits
  limits: {
    per_transaction: 50.00   # EUR
    per_day:         100.00  # EUR
    per_month:       500.00  # EUR
  }
}
```

---

## Policy-Evaluation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   POLICY EVALUATION FLOW                                                   â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   Offer empfangen                                                   â”‚  â”‚
â”‚   â”‚        â”‚                                                            â”‚  â”‚
â”‚   â”‚        â–¼                                                            â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚   â”‚ Check: auto_reject conditions                               â”‚  â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â”‚                              â”‚                                      â”‚  â”‚
â”‚   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚  â”‚
â”‚   â”‚              â”‚                               â”‚                     â”‚  â”‚
â”‚   â”‚              â–¼                               â–¼                     â”‚  â”‚
â”‚   â”‚         MATCHED                         NOT MATCHED                â”‚  â”‚
â”‚   â”‚         â†’ REJECT                             â”‚                     â”‚  â”‚
â”‚   â”‚                                              â–¼                     â”‚  â”‚
â”‚   â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚   â”‚                              â”‚ Check: auto_accept conditions    â”‚ â”‚  â”‚
â”‚   â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚   â”‚                                              â”‚                     â”‚  â”‚
â”‚   â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚                              â”‚                               â”‚    â”‚  â”‚
â”‚   â”‚                              â–¼                               â–¼    â”‚  â”‚
â”‚   â”‚                         MATCHED                         NOT MATCHEDâ”‚  â”‚
â”‚   â”‚                         â†’ ACCEPT                             â”‚    â”‚  â”‚
â”‚   â”‚                                                              â–¼    â”‚  â”‚
â”‚   â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚   â”‚                                              â”‚ Check: escalate   â”‚â”‚  â”‚
â”‚   â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚   â”‚                                                              â”‚    â”‚  â”‚
â”‚   â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”â”‚  â”‚
â”‚   â”‚                                              â”‚                   â”‚â”‚  â”‚
â”‚   â”‚                                              â–¼                   â–¼â”‚  â”‚
â”‚   â”‚                                         MATCHED              NOT  â”‚  â”‚
â”‚   â”‚                                         â†’ ASK OWNER          â†’USE â”‚  â”‚
â”‚   â”‚                                                              DEFAULTâ”‚ â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Provider-Policy

Provider haben eigene Policies:

```yaml
policy "charging-provider-default" {
  id:   "did:erynoa:policy:provider-001"
  name: "Provider Angebots-Policy"

  # Automatisch anbieten an:
  auto_offer: {
    conditions: [
      { seeker_trust: { gte: 0.5 } },
      { has_payment_method: true }
    ]
  }

  # Dynamische Preisgestaltung
  pricing: {
    base_price:     0.35  # EUR/kWh

    modifiers: [
      { condition: "peak_hours",     adjustment: +0.10 },
      { condition: "low_demand",     adjustment: -0.05 },
      { condition: "high_trust",     adjustment: -0.02 },
      { condition: "premium_member", adjustment: -0.05 }
    ]

    min_price: 0.28
    max_price: 0.55
  }

  # KapazitÃ¤ts-Management
  capacity: {
    max_concurrent_sessions: 2
    reservation_timeout:     300  # Sekunden
  }
}
```

---

## WeiterfÃ¼hrende Dokumente

- [agent-modell.md](./agent-modell.md) â€“ Agenten
- [intent.md](./intent.md) â€“ Absichten
- [negotiation.md](./negotiation.md) â€“ Verhandlung
- [wallet.md](./wallet.md) â€“ Budgets
